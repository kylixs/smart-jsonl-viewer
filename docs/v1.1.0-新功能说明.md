# v1.1.0 新功能说明

## 🎉 三大核心优化已完成

---

## 1️⃣ 新标签页打开（全屏查看）

### 改进说明
之前点击扩展图标会打开一个小弹窗，现在改为在新标签页中打开，占满整个浏览器窗口。

### 使用方法
1. 点击浏览器工具栏的 JSONL Viewer 图标
2. 自动在新标签页打开查看器
3. 享受全屏的查看体验

### 优势
- ✅ 更大的查看空间
- ✅ 更好的阅读体验
- ✅ 可以像普通网页一样操作（刷新、书签等）

---

## 2️⃣ 展开深度控制（智能展开）

### 功能位置
工具栏右侧 → "展开深度" 下拉选择器

### 可选深度
- **全部折叠**（0 层）：所有节点都折叠
- **1-5 层**：展开到指定层级
- **全部展开**：递归展开所有节点

### 使用场景

#### 场景 1：快速浏览大文件结构
```
选择 "1 层" → 只展开第一层，查看顶层字段
选择 "2 层" → 展开两层，了解主要结构
```

#### 场景 2：避免过度展开
```json
{
  "data": {                    // ← 层级 1
    "users": [                 // ← 层级 2
      {                        // ← 层级 3
        "profile": {           // ← 层级 4（如果选择 3 层，这里会折叠）
          "...": "..."
        }
      }
    ]
  }
}
```

选择 "3 层" → profile 对象会保持折叠，避免页面过长

#### 场景 3：性能优化
对于特别大的 JSON 文件，选择较小的展开深度可以提升性能。

### 智能行为
- 切换深度后，所有已加载的行会立即应用新的展开规则
- 深度值会实时生效，无需刷新页面
- 深度控制只影响 JSON 树的展开，不影响行的展开

---

## 3️⃣ 复制转码后内容（两种方式）

### 方式一：复制单个字段的解码内容

#### 位置
解码后的字符串旁边会显示 📋 复制按钮

#### 使用方法
1. 找到被解码的字符串（黄色背景标记）
2. 点击旁边的 📋 按钮
3. 解码后的内容已复制到剪贴板
4. 按钮会显示 ✓ 表示复制成功

#### 示例
```json
{
  "message": "Line 1\\nLine 2"
}
```

点击 📋 后，复制的内容是：
```
Line 1
Line 2
```

对于嵌套的 JSON 字符串：
```json
{
  "data": "{\"name\":\"Alice\",\"age\":30}"
}
```

点击 📋 后，复制的是格式化的 JSON：
```json
{
  "name": "Alice",
  "age": 30
}
```

### 方式二：复制整行的解码内容

#### 位置
鼠标悬停在任意一行时，右侧会显示 📋 复制按钮

#### 使用方法
1. 将鼠标移到想要复制的行上
2. 右侧出现 📋 按钮
3. 点击按钮
4. 整行的解码内容（包括所有嵌套字符串）已复制

#### 示例
原始行：
```json
{"user": "Alice", "message": "Hello\\nWorld", "data": "{\"nested\": true}"}
```

点击 📋 后，复制的内容是（完全解码+格式化）：
```json
{
  "user": "Alice",
  "message": "Hello\nWorld",
  "data": {
    "nested": true
  }
}
```

#### 优势
- ✅ 自动递归解码所有嵌套字符串
- ✅ 格式化为可读的 JSON
- ✅ 直接粘贴到代码编辑器使用
- ✅ 节省手动解码的时间

---

## 🎨 UI 改进

### 深度选择器
- 半透明白色背景，与工具栏渐变色融合
- 下拉菜单采用白色背景，易于阅读
- 悬停时高亮，提供视觉反馈

### 复制按钮
- 蓝色主题色，与整体配色一致
- 悬停时颜色加深，提供交互反馈
- 点击时缩放动画，增强操作感
- 成功后显示 ✓，2 秒后恢复

### 行级复制按钮
- 默认隐藏，悬停时才显示
- 避免界面过于拥挤
- 平滑的淡入淡出动画

---

## 📊 性能影响

### 包体积
- **v1.0.0**: ~92 KB（gzip: ~35 KB）
- **v1.1.0**: ~95 KB（gzip: ~33 KB）
- 增加：~3 KB（新增功能）

### 运行时性能
- 深度控制不影响性能（仅改变渲染逻辑）
- 复制功能按需触发，无性能影响
- 新标签页模式性能更好（相比弹窗）

---

## 🔄 迁移指南

### 从 v1.0.0 升级

1. **重新构建**
   ```bash
   git pull
   npm run build
   ```

2. **刷新扩展**
   - 访问 `chrome://extensions/`
   - 找到 JSONL Viewer
   - 点击刷新图标 🔄

3. **测试新功能**
   - 点击扩展图标，验证是否在新标签页打开
   - 测试深度选择器
   - 测试复制功能

### 兼容性
- ✅ 完全向下兼容
- ✅ 所有旧功能保持不变
- ✅ 数据格式无变化
- ✅ 主题设置保留

---

## 💡 使用技巧

### 技巧 1：快速查看大文件结构
```
1. 加载大型 JSONL 文件
2. 选择 "展开深度: 2 层"
3. 快速浏览整体结构
4. 点击感兴趣的节点展开查看细节
```

### 技巧 2：提取特定数据
```
1. 使用搜索过滤找到目标数据
2. 悬停在该行上
3. 点击 📋 复制按钮
4. 粘贴到代码编辑器
5. 得到完全解码的 JSON
```

### 技巧 3：调试嵌套 JSON
```
1. 找到嵌套的 JSON 字符串
2. 点击 "🔄 Decode" 查看结构
3. 点击 📋 复制解码后的内容
4. 粘贴到测试工具验证
```

### 技巧 4：对比不同深度
```
1. 先选择 "1 层" 查看顶层字段
2. 再选择 "3 层" 查看详细结构
3. 找到感兴趣的部分后选择 "全部展开"
```

---

## 🐛 已知问题

目前无已知问题。如有问题请报告到 GitHub Issues。

---

## 📝 反馈

如果你有任何建议或发现问题：
1. 提交 GitHub Issue
2. 描述使用场景和期望行为
3. 附上截图或示例数据（如果可能）

---

## 🎯 下一个版本计划（v1.2.0）

- [ ] 键盘快捷键（Ctrl+F 搜索、Ctrl+E 展开等）
- [ ] 正则表达式搜索
- [ ] 行号跳转功能
- [ ] 书签/收藏功能

---

**享受新功能！** 🎉
