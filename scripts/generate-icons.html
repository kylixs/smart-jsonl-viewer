<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Icon Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      margin-bottom: 10px;
    }
    .section {
      margin-top: 40px;
    }
    .section-title {
      font-size: 18px;
      font-weight: bold;
      color: #4CAF50;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid #4CAF50;
    }
    .icons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .icon-item {
      text-align: center;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 6px;
    }
    .icon-item canvas {
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    .icon-item.transparent {
      background: repeating-conic-gradient(#ddd 0% 25%, white 0% 50%) 50% / 20px 20px;
    }
    .icon-item.transparent canvas {
      background: repeating-conic-gradient(#eee 0% 25%, white 0% 50%) 50% / 10px 10px;
    }
    .icon-item button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
    }
    .icon-item button:hover {
      background: #45a049;
    }
    .icon-label {
      font-weight: bold;
      color: #666;
      margin-bottom: 10px;
    }
    .download-all {
      margin-top: 30px;
      text-align: center;
    }
    .download-all button {
      background: #2196F3;
      color: white;
      border: none;
      padding: 12px 32px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
    }
    .download-all button:hover {
      background: #1976D2;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>JSONL Viewer å›¾æ ‡ç”Ÿæˆå™¨</h1>
    <p>ç”Ÿæˆä¸¤å¥—ä¸åŒç”¨é€”çš„å›¾æ ‡</p>

    <div class="section">
      <div class="section-title">ğŸ¨ å¸¦èƒŒæ™¯å›¾æ ‡ï¼ˆç”¨äº Chrome æ‰©å±•å·¥å…·æ ï¼‰</div>
      <div class="icons" id="solid-icons"></div>
    </div>

    <div class="section">
      <div class="section-title">âœ¨ é€æ˜èƒŒæ™¯å›¾æ ‡ï¼ˆç”¨äºåº”ç”¨å†…æˆ–å…¶ä»–åœºæ™¯ï¼‰</div>
      <div class="icons" id="transparent-icons"></div>
    </div>

    <div class="download-all">
      <button onclick="downloadAllAsSeparateFolders()">ğŸ“¦ ä¸‹è½½å…¨éƒ¨å›¾æ ‡ï¼ˆZIPï¼‰</button>
      <p style="color: #666; font-size: 13px; margin-top: 10px;">
        æˆ–ç‚¹å‡»å•ä¸ªå›¾æ ‡ä¸‹æ–¹çš„æŒ‰é’®å•ç‹¬ä¸‹è½½
      </p>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <script>
    const sizes = [16, 32, 48, 128];

    function drawSolidIcon(canvas, size) {
      const ctx = canvas.getContext('2d');
      canvas.width = size;
      canvas.height = size;

      // åˆ›å»ºæ¸å˜èƒŒæ™¯ï¼ˆç»¿è‰²ï¼‰
      const gradient = ctx.createLinearGradient(0, 0, size, size);
      gradient.addColorStop(0, '#4CAF50');
      gradient.addColorStop(1, '#2E7D32');

      // ç»˜åˆ¶åœ†è§’çŸ©å½¢èƒŒæ™¯
      const radius = size * 0.15;
      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.roundRect(0, 0, size, size, radius);
      ctx.fill();

      // ç»˜åˆ¶ç™½è‰²çš„ JSON å¤§æ‹¬å·
      ctx.fillStyle = '#FFFFFF';
      ctx.font = `bold ${size * 0.65}px Arial, sans-serif`;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('{}', size / 2, size / 2);
    }

    function drawTransparentIcon(canvas, size) {
      const ctx = canvas.getContext('2d');
      canvas.width = size;
      canvas.height = size;

      // æ¸…é™¤ç”»å¸ƒï¼Œä½¿ç”¨é€æ˜èƒŒæ™¯
      ctx.clearRect(0, 0, size, size);

      // ç»˜åˆ¶ç™½è‰²çš„ JSON å¤§æ‹¬å·ï¼ˆå¸¦æè¾¹å¢å¼ºå¯è§æ€§ï¼‰
      ctx.fillStyle = '#FFFFFF';
      ctx.strokeStyle = 'rgba(0, 0, 0, 0.15)';
      ctx.lineWidth = size * 0.04;
      ctx.font = `bold ${size * 0.7}px Arial, sans-serif`;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';

      // å…ˆæè¾¹å†å¡«å……
      ctx.strokeText('{}', size / 2, size / 2);
      ctx.fillText('{}', size / 2, size / 2);
    }

    function createIconItem(size, type, drawFunc) {
      const item = document.createElement('div');
      item.className = type === 'transparent' ? 'icon-item transparent' : 'icon-item';

      const label = document.createElement('div');
      label.className = 'icon-label';
      label.textContent = `${size}x${size}`;

      const canvas = document.createElement('canvas');
      drawFunc(canvas, size);

      const button = document.createElement('button');
      button.textContent = 'ä¸‹è½½';
      button.onclick = () => {
        const link = document.createElement('a');
        link.download = type === 'transparent' ? `icon${size}_transparent.png` : `icon${size}.png`;
        link.href = canvas.toDataURL('image/png');
        link.click();
      };

      item.appendChild(label);
      item.appendChild(canvas);
      item.appendChild(button);
      return { item, canvas };
    }

    const solidIconsContainer = document.getElementById('solid-icons');
    const transparentIconsContainer = document.getElementById('transparent-icons');
    const allCanvases = [];

    sizes.forEach(size => {
      const { item: solidItem, canvas: solidCanvas } = createIconItem(size, 'solid', drawSolidIcon);
      solidIconsContainer.appendChild(solidItem);
      allCanvases.push({ size, type: 'solid', canvas: solidCanvas });

      const { item: transparentItem, canvas: transparentCanvas } = createIconItem(size, 'transparent', drawTransparentIcon);
      transparentIconsContainer.appendChild(transparentItem);
      allCanvases.push({ size, type: 'transparent', canvas: transparentCanvas });
    });

    async function downloadAllAsSeparateFolders() {
      const zip = new JSZip();

      // åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹
      const solidFolder = zip.folder('solid-icons');
      const transparentFolder = zip.folder('transparent-icons');

      for (const { size, type, canvas } of allCanvases) {
        const dataUrl = canvas.toDataURL('image/png');
        const base64Data = dataUrl.split(',')[1];

        if (type === 'solid') {
          solidFolder.file(`icon${size}.png`, base64Data, { base64: true });
        } else {
          transparentFolder.file(`icon${size}_transparent.png`, base64Data, { base64: true });
        }
      }

      const content = await zip.generateAsync({ type: 'blob' });
      saveAs(content, 'jsonl-viewer-icons.zip');
    }
  </script>
</body>
</html>
